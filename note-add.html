<!DOCTYPE html>
<html lang="zh_cn">
<head>
<title>Ordeal 笔记</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap&subset=chinese-simplified"
rel="stylesheet">

<link href="https://cdn.remixicon.com/releases/v1.2.2/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/owl.theme.default.min.css">
<link rel="stylesheet" href="css/magnific-popup.css">
<link rel="stylesheet" href="css/aos.css">
<link rel="stylesheet" href="css/ionicons.min.css">
<link rel="stylesheet" href="css/flaticon.css">
<link rel="stylesheet" href="css/icomoon.css">
<link rel="stylesheet" href="css/style.css">

<script>
function submitNote() {

var cno = document.getElementById("cno").value;
var title = document.getElementById("title").value;
var text = document.getElementById("text").value;
//1.创建ajax对象
var xhr = ajaxFunction();
xhr.onreadystatechange = function () {
if (xhr.readyState == 4) {
if (xhr.status == 200) {
var data = xhr.responseText;
if (data == 1) {
alert('笔记提交成功');
// console.log('笔记提交成功！');
//显示我的按钮或者跳转页面
} else if (data == 0) {
alert('笔记提交失败！\n请稍后重试');
// console.log('笔记提交失败！');
} else if (data == 2) {
$('#myModal').modal('show');
// alert('未登陆！');
// console.log('没登陆！');
}
}
}
};
//规定发送数据的形式（post/get），url，以及传输方式(同步/异步)
xhr.open("post", "./writeNote.do", true);
//post方式需要加下边这句，get方式不需要
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//将页面输入数据发送到后台
xhr.send("cno=" + cno + "&title=" + title + "&text=" + text);
}

function submitWork() {

var title = document.getElementById("wtitle").value;
var describe = document.getElementById("describe").value;

//1.创建ajax对象
var xhr = ajaxFunction();
xhr.onreadystatechange = function () {
if (xhr.readyState == 4) {
if (xhr.status == 200) {
var data = xhr.responseText;
if (data == 1) {
alert('模板上传成功')
//显示我的按钮或者跳转页面
} else if (data == 0) {
alert('模板上传失败！\n请稍后重试');
} else if (data == 2) {
$('#myModal').modal('show');
// alert('未登陆！');
}
}
}
};
//规定发送数据的形式（post/get），url，以及传输方式(同步/异步)
xhr.open("post", "./uploadWork.do", true);
//post方式需要加下边这句，get方式不需要
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//将页面输入数据发送到后台
xhr.send("title=" + title + "&describe=" + describe);
}

function login() {
var sno = document.getElementById("username").value;
var password = document.getElementById("password").value;


//1.创建ajax对象
var xhr = ajaxFunction();
xhr.onreadystatechange = function() {
if(xhr.readyState == 4) {
if(xhr.status == 200) {
var data= xhr.responseText;
if(data == 1){
$('#myModal').modal('hide');
$('#loginbtn').hide();
//显示我的按钮或者跳转页面
}else if(data == 0){
alert('用户名或密码错误！');
}
}
}
};
//规定发送数据的形式（post/get），url，以及传输方式(同步/异步)
xhr.open("post","./login.do",true);
//post方式需要加下边这句，get方式不需要
xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
//将页面输入数据发送到后台
xhr.send("sno="+sno+"&password="+password);
}

function ajaxFunction() {
var xmlHttp;
try {
xmlHttp = new XMLHttpRequest();
} catch(e) {
try {
xmlHttp = new ActiveXObject("Msxm12.XMLHTTP");
} catch(e) {
try {
xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
} catch(e) {}
}
}
return xmlHttp;
}
</script>
</head>
<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light site-navbar-target"
id="ftco-navbar">
<div class="container">
<a class="navbar-brand" href="index.html">Or<span>deal</span></a>
<button class="navbar-toggler js-fh5co-nav-toggle fh5co-nav-toggle" type="button" data-toggle="collapse"
data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
<span class="oi oi-menu"></span> Menu
</button>
<div class="collapse navbar-collapse" id="ftco-nav">
<ul class="navbar-nav nav ml-auto" style="align-items: baseline">
<li class="nav-item">
<a href="" class="nav-link">
<span>主页</span>
</a>
</li>                <li class="nav-item"><a href="" class="nav-link dropdown-toggle" data-toggle="dropdown">HTML</a>
<div class="dropdown-menu dropdown-menu-right">
<a class="dropdown-item" href="html-main.html">HTML 教程</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="try/try.php?filename=tryhtml_intro">HTML 实例</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="tags/html-reference.html">HTML 参考手册</a>
</div>
</li>
<li class="nav-item"><a href="" class="nav-link dropdown-toggle" data-toggle="dropdown">CSS</a>
<div class="dropdown-menu dropdown-menu-right">
<a class="dropdown-item" href="#">CSS 教程</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">CSS 实例</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">CSS 参考手册</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">CSS 响应式设计</a>
</div>
</li>
<li class="nav-item"><a href="" class="nav-link dropdown-toggle" data-toggle="dropdown">JavaScript</a>
<div class="dropdown-menu dropdown-menu-right">
<a class="dropdown-item" href="#">Javascript 教程</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 函数</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS HTML DOM</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 高级教程</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 浏览器BOM</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 库</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 实例</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#">JS 参考手册</a>
</div>
</li>
<li class="nav-item"><a href="note-main.html" class="nav-link"><span>笔记</span></a></li>
<li class="nav-item"><a href="share-main.html" class="nav-link"><span>模版</span></a></li>
<li class="nav-item"><a href="exam-main.html" class="nav-link"><span>测验</span></a></li>
<li class="nav-item">
<div class="col-1"></div>
</li>
<li class="nav-item">
<button class="btn btn-outline-dark px-4 py-2" data-toggle="modal" data-target="#myModal"
id="loginbtn" style="display: ">登录
</button>
</li>
</ul>
</div>
</div>
</nav>

<section class="comment-form-wrap">
<div class="row">
<div class="col-md-6 p-5  pt-5" style="padding-left: 15px; border-right: 1px dashed #000;">
<h3 class="text-center" style="font-weight: 300;">留一个笔记</h3>
<br>

<div class="form-group">
<label for="title">标题 <span class="icon-mode_edit"></span> </label>
<input type="text" class="form-control" id="title" name="title">
</div>
<div class="form-group">
<label for="cno">相关课程 <span class="icon-code"></span> </label>
<select class="form-control" id="cno" name="cno">
<optgroup label="--------------">
<option value="1">HTML</option>
<option value="2">CSS</option>
<option value="3">JavaScript</option>
</optgroup>
</select>
</div>
<div class="form-group">
<label for="text">笔记内容 <i class="icon-mode_edit"></i></label>
<textarea name="text" id="text" cols="30" rows="10" class="form-control"></textarea>
</div>
<br><br>
<div class="form-group text-center">
<input value="提&emsp;交" class="btn btn-primary py-3" style="width:130px" onclick="submitNote()">
</div>

</div>

<div class="col-md-6 p-5  pt-5">

<h3 class="text-center" style="font-weight: 300;">传一个模版</h3><br><br>
<form action="#" method="post" class="">
<div class="form-group">
<input type="file" class="form-control-file">
</div>
<br>
<div class="form-group">
<label for="wtitle">模版的标题 <span class="icon-mode_edit"></span> </label>
<input type="text" class="form-control" id="wtitle">
</div>
<br>
<div class="form-group">
<label for="describe">介绍一下模版 <span class="icon-mode_edit"></span></label>
<textarea name="" id="describe" cols="30" rows="10" class="form-control"></textarea>
</div>
<br><br>
<div class="form-group text-center">
<input value="&emsp;提&emsp;交&emsp;" class="btn btn-primary py-3 px-4"  style="width:130px" onclick="submitWork()">
</div>

</form>
</div>

</div>


</div>
</section>

<!-- MODAL -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header"><h3 class="modal-title" id="myModalLabel">登录</h3>
<button type="button" class="close" data-dismiss="modal">
<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
</button>
</div>
<div class="modal-body">
<div class="form-group">
<label class="form-check-label" for="username">&ensp;用户id</label>
<input type="text" placeholder="username..." class="form-control" id="username" name="username">
</div>
<div class="form-group">
<label class="form-check-label" for="password">&ensp;密码</label>
<input type="password" placeholder="password..." class="form-control" id="password" name="password">
</div>
<button class="btn btn-primary" onclick="login()">确认</button>
</div>
</div>
</div>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/aos.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/scrollax.min.js"></script>
<script src="js/google-map.js"></script>
<script src="js/main.js"></script>

</body>
</html>